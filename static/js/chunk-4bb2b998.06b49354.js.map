{"version":3,"sources":["webpack:///./src/views/fund/index.vue","webpack:///./src/views/fund/index.vue?5729","webpack:///./src/views/fund/index.vue?bc2d"],"names":["class","style","_createElementVNode","_createElementBlock","_createVNode","_component_Header","leftTitle","_ctx","_toDisplayString","gameft","_hoisted_6","balanceChainTour","_hoisted_10","marketValue","profit","_component_Footer","components","Header","Footer","setup","proxy","getCurrentInstance","store","useStore","t","useI18n","data","reactive","address","computed","state","accounts","web3","provider","top","price","totalSupply","SWAPTOPContract","topContract","initContract","eth","Contract","topAbi","config","topAddress","swaptopAbi","SWAPTOP","initData","async","gameftHandle","getPriceHandle","getMarketValue","balanceOfHandle","topPrice","methods","getTopPrice","call","BigNumber","dividedBy","toFixed","error","$errorformat","decimalsTop","decimals","from","multipliedBy","Toast0","Toast","loading","duration","chainTour","balanceOf","chainTourAddress","clear","Toast1","then","res","watch","val","refData","toRefs","__exports__","render"],"mappings":"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","file":"static/js/chunk-4bb2b998.06b49354.js","sourcesContent":["<template>\r\n  <div class=\"footer-container\">\r\n    <Header>\r\n      <template #leftTitle>\r\n        {{t('index.链游基金')}}\r\n      </template>\r\n    </Header>\r\n    <div class=\"fund\">\r\n      <div class=\"cell-2 region-bg\" style=\"margin-bottom:28px;\">\r\n        <div class=\"key\">{{t('index.投資金額')}}</div>\r\n        <div class=\"value\">{{top.gameft}} <span>TOP</span></div>\r\n      </div>\r\n      <div class=\"cell-2 region-bg\" style=\"margin-bottom:28px;\">\r\n        <div class=\"key\">{{t('index.剩餘金額')}}</div>\r\n        <div class=\"value\">{{top.balanceChainTour}} <span>TOP</span></div>\r\n      </div>\r\n      <div class=\"cell-2 region-bg\" style=\"margin-bottom:28px;\">\r\n        <div class=\"key\">{{t('index.總市值')}}</div>\r\n        <div class=\"value\">${{top.marketValue}}</div>\r\n      </div>\r\n      <div class=\"cell-2 region-bg\" style=\"margin-bottom:28px;\">\r\n        <div class=\"key\">{{t('index.利潤金額')}}</div>\r\n        <div class=\"value\">${{top.profit}}</div>\r\n      </div>\r\n    </div>\r\n    <Footer></Footer>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Header from '@/components/Header'\r\nimport Footer from '@/components/Footer'\r\nimport { reactive, toRefs, computed, watch, getCurrentInstance } from \"vue\";\r\nimport { useI18n } from \"vue-i18n\";\r\nimport { useStore } from \"vuex\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport { config } from \"@/utils/config\";\r\nimport topAbi from \"@/utils/topAbi\";\r\nimport swaptopAbi from \"@/utils/swaptopAbi\";\r\nimport { gameft } from '@/api'\r\nimport {\r\n  Toast\r\n} from \"vant\";\r\nexport default {\r\n  components: {\r\n    Header,\r\n    Footer\r\n  },\r\n  setup () {\r\n    const { proxy } = getCurrentInstance();\r\n    const store = useStore()\r\n    const { t } = useI18n()\r\n    const data = reactive({\r\n      t: t,\r\n      address: computed(() => store.state.accounts[0]),\r\n      web3: computed(() => store.state.provider),\r\n      top: {\r\n        balanceChainTour: '0.00',\r\n        price: '0.00',\r\n        totalSupply: '0.00',\r\n        marketValue: '0.00',\r\n        gameft: '0.00',\r\n        profit: '0.00',\r\n      },\r\n      SWAPTOPContract: null,\r\n      topContract: null,\r\n      initContract: () => {\r\n        data.topContract = new data.web3.eth.Contract(\r\n          topAbi,\r\n          config.topAddress\r\n        );\r\n        data.SWAPTOPContract = new data.web3.eth.Contract(\r\n          swaptopAbi,\r\n          config.SWAPTOP\r\n        );\r\n        data.initData()\r\n      },\r\n      initData: async () => {\r\n        data.gameftHandle()\r\n        await data.getPriceHandle()\r\n        await data.getMarketValue()\r\n        data.balanceOfHandle()\r\n      },\r\n      getPriceHandle: async () => {\r\n        try {\r\n          let topPrice = await data.SWAPTOPContract.methods.getTopPrice().call({\r\n            address: data.address\r\n          })\r\n          // 除usdt的 18位\r\n          data.top.price = new BigNumber(topPrice)\r\n            .dividedBy(10 ** 18)\r\n            .toFixed(4);\r\n          // console.log(topPrice, 'topPrice')\r\n        } catch (error) {\r\n          proxy.$errorformat(error)\r\n        }\r\n      },\r\n      getMarketValue: async () => {\r\n        // 市值\r\n        try {\r\n          let decimalsTop = await data.topContract.methods\r\n            .decimals()\r\n            .call({ from: data.address })\r\n          // console.log('decimalsTop:', decimalsTop)\r\n          let totalSupply = await data.topContract.methods.totalSupply().call({\r\n            address: data.address\r\n          })\r\n          // console.log('totalSupply:', totalSupply)\r\n          totalSupply = new BigNumber(totalSupply)\r\n            .dividedBy(10 ** decimalsTop)\r\n            .toFixed(4);\r\n          let marketValue = new BigNumber(totalSupply)\r\n            .multipliedBy(data.top.price)\r\n            .toFixed(4);\r\n          data.top.totalSupply = totalSupply\r\n          data.top.marketValue = marketValue\r\n          console.log('totalSupply:', totalSupply, 'marketValue:', marketValue)\r\n        } catch (error) {\r\n          proxy.$errorformat(error)\r\n        }\r\n      },\r\n      balanceOfHandle: async () => {\r\n        const Toast0 = Toast.loading({\r\n          duration: 0,\r\n        });\r\n        try {\r\n          let decimalsTop = await data.topContract.methods\r\n            .decimals()\r\n            .call({ from: data.address })\r\n          // 链游\r\n          let chainTour = await data.topContract.methods.balanceOf(config.chainTourAddress).call({\r\n            address: data.address\r\n          })\r\n          chainTour = new BigNumber(chainTour)\r\n            .dividedBy(10 ** decimalsTop)\r\n            .toFixed(4);\r\n          data.top.balanceChainTour = chainTour\r\n          Toast0.clear()\r\n        } catch (error) {\r\n          Toast0.clear()\r\n          proxy.$errorformat(error)\r\n        }\r\n      },\r\n      gameftHandle: () => {\r\n        const Toast1 = Toast.loading({\r\n          duration: 0,\r\n        });\r\n        gameft({\r\n          address: data.address\r\n        })\r\n          .then((res) => {\r\n            Toast1.clear()\r\n            let { gameft, profit } = res.data\r\n            data.top.gameft = gameft\r\n            data.top.profit = profit\r\n          })\r\n      }\r\n    })\r\n    if (data.address) {\r\n      data.initContract()\r\n    }\r\n    watch(() => data.address, (val) => {\r\n      if (val) {\r\n        data.initContract()\r\n      }\r\n    })\r\n    const refData = toRefs(data);\r\n    return {\r\n      ...refData\r\n    };\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\">\r\n</style>\r\n<style lang=\"less\" scoped>\r\n.fund {\r\n  padding-bottom: 16px;\r\n  .cell-2 {\r\n    padding: 0 20px;\r\n    .key {\r\n      padding-top: 24px;\r\n      font-size: 15px;\r\n      font-weight: 500;\r\n      color: #00edf8;\r\n    }\r\n    .value {\r\n      word-break: break-all;\r\n      padding-top: 20px;\r\n      font-size: 22px;\r\n      font-weight: 600;\r\n      color: #ffffff;\r\n      padding-bottom: 25px;\r\n      span {\r\n        font-size: 14px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./index.vue?vue&type=template&id=704563ff&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=704563ff&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\contract\\\\frontend\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-704563ff\"]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=704563ff&lang=less&scoped=true\""],"sourceRoot":""}