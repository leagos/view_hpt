(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7246ae68"],{5715:function(e){e.exports=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_addr","type":"address"},{"indexed":false,"internalType":"bool","name":"_access","type":"bool"}],"name":"AccessAllowed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"epoch","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"totalSupply","type":"uint256"}],"name":"LogRebase","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[],"name":"DECIMALS","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_UINT256","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"RATE_DECIMALS","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_autoRebase","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_lastRebasedTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner_","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"who","type":"address"}],"name":"bOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"who","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"who","type":"address"}],"name":"gonOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_addr","type":"address"}],"name":"grantAccess","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_addr","type":"address"}],"name":"hasAccess","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"who","type":"address"}],"name":"isCompoundingExempt","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"who","type":"address"}],"name":"isGonExempt","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"manualRebase","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_addr","type":"address"}],"name":"revokeAccess","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_flag","type":"bool"}],"name":"setAutoRebase","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_addr","type":"address"},{"internalType":"bool","name":"_isExempt","type":"bool"}],"name":"setGonExempt","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"total_supply_gons","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},"6c6a":function(e,t,n){"use strict";n.r(t);var a=n("7a23"),i=n("97d3"),s=n.n(i);const p=e=>(Object(a["pushScopeId"])("data-v-fea77a64"),e=e(),Object(a["popScopeId"])(),e),o={class:"footer-container"},d={class:"swap"},l={class:"swap-card region-bg"},r={class:"input-title"},u={class:"input-wrap cell-bg"},y=["placeholder"],c=p(()=>Object(a["createElementVNode"])("div",{class:"label"},"Oasis",-1)),m=p(()=>Object(a["createElementVNode"])("img",{class:"icon-swap",src:s.a,alt:""},null,-1)),b={class:"input-title",style:{"padding-top":"23px"}},O={class:"input-wrap cell-bg"},T=["placeholder"],w=p(()=>Object(a["createElementVNode"])("div",{class:"label"},"TOP",-1)),f={class:"des"},v={class:"btn-wrap"},j={class:"tip"},h={class:"record"},g={class:"table-title"},x={class:"table region-bg"},A={class:"thead"},M={class:"td"},P=p(()=>Object(a["createElementVNode"])("span",null,"(Oasis)",-1)),V={class:"td"},N=p(()=>Object(a["createElementVNode"])("span",null,"(TOP)",-1)),E={class:"td"},S={class:"tbody"},C=p(()=>Object(a["createElementVNode"])("div",{class:"td"},"100",-1)),D=p(()=>Object(a["createElementVNode"])("div",{class:"td"},"10000000",-1)),k=p(()=>Object(a["createElementVNode"])("div",{class:"td"},"2022.06.23 10:20:30",-1)),B=[C,D,k];function R(e,t,n,i,s,p){const C=Object(a["resolveComponent"])("Header"),D=Object(a["resolveComponent"])("van-button"),k=Object(a["resolveComponent"])("Footer");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",o,[Object(a["createVNode"])(C,null,{leftTitle:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.t("index.Oasis兌換TOP")),1)]),_:1}),Object(a["createElementVNode"])("div",d,[Object(a["createElementVNode"])("div",l,[Object(a["createElementVNode"])("div",r,"Oasis"+Object(a["toDisplayString"])(e.t("index.兌換")),1),Object(a["createElementVNode"])("div",u,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.oasis.amount=t),type:"number",placeholder:e.t("index.請輸入兌換金額")},null,8,y),[[a["vModelText"],e.oasis.amount]]),c]),m,Object(a["createElementVNode"])("div",b,Object(a["toDisplayString"])(e.t("index.兌換數量")),1),Object(a["createElementVNode"])("div",O,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=t=>e.oasis.amount=t),type:"number",placeholder:e.t("index.請輸入兌換金額")},null,8,T),[[a["vModelText"],e.oasis.amount]]),w]),Object(a["createElementVNode"])("div",f,Object(a["toDisplayString"])(e.t("index.兌換比例："))+"1Oasis=1TOP",1),Object(a["createElementVNode"])("div",v,[Number(e.oasis.allowance)?(Object(a["openBlock"])(),Object(a["createBlock"])(D,{key:1,class:"btn",type:"primary",loading:e.oasis.loadingSwap,disabled:e.oasis.loadingSwap,"loading-text":e.t("index.兌換")+"...",onClick:e.swapHandle},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.t("index.兌換")),1)]),_:1},8,["loading","disabled","loading-text","onClick"])):(Object(a["openBlock"])(),Object(a["createBlock"])(D,{key:0,class:"btn",type:"primary",loading:e.oasis.loading,disabled:e.oasis.loading,"loading-text":e.t("index.參與")+"...",onClick:e.approveOasisHandle},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.t("index.參與")),1)]),_:1},8,["loading","disabled","loading-text","onClick"]))]),Object(a["createElementVNode"])("div",j,Object(a["toDisplayString"])(e.t("index.每次兌換即按照兌換比例進行兌換")),1)]),Object(a["createElementVNode"])("div",h,[Object(a["createElementVNode"])("div",g,Object(a["toDisplayString"])(e.t("index.兌換記錄")),1),Object(a["createElementVNode"])("div",x,[Object(a["createElementVNode"])("div",A,[Object(a["createElementVNode"])("div",M,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.t("index.支付")),1),P]),Object(a["createElementVNode"])("div",V,[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.t("index.獲得")),1),N]),Object(a["createElementVNode"])("div",E,Object(a["toDisplayString"])(e.t("index.時間")),1)]),Object(a["createElementVNode"])("div",S,[(Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(5,(e,t)=>Object(a["createElementVNode"])("div",{class:"tr",key:t},B)),64))])])]),Object(a["createVNode"])(k)])])}var _=n("0418"),J=n("fd2d"),z=n("47e2"),L=n("5502"),W=n("01ea"),F=n("5715"),U=n("c266"),H=n("901e"),G=n.n(H),X=n("9d56"),I=n("6c43"),K={components:{Header:_["a"],Footer:J["a"]},setup(){const{proxy:e}=Object(a["getCurrentInstance"])(),t=Object(L["b"])(),{t:n}=Object(z["a"])(),i=Object(a["reactive"])({t:n,address:Object(a["computed"])(()=>t.state.accounts[0]),web3:Object(a["computed"])(()=>t.state.provider),balance:0,oasisContract:null,SWAPTOPContract:null,oasis:{loading:!1,allowance:0,amount:"",loadingSwap:!1},initContract:()=>{i.oasisContract=new i.web3.eth.Contract(F,W["a"].oasisAddress),i.SWAPTOPContract=new i.web3.eth.Contract(U,W["a"].SWAPTOP),i.initData()},initData:()=>{i.getAllowanceOasis()},approveOasisHandle:()=>{i.oasis.loading=!0,i.oasisContract.methods.approve(W["a"].SWAPTOP,X["a"]).send({from:i.address}).then(async()=>{i.oasis.loading=!1,Object(I["a"])(n("index.批准成功")),await i.getAllowanceOasis()}).catch(e=>{i.oasis.loading=!1,Object(I["a"])(n("index.批准失敗"))})},getAllowanceOasis:async()=>{let e=await i.oasisContract.methods.allowance(i.address,W["a"].SWAPTOP).call({from:i.address});return i.oasis.allowance=e,e},swapHandle:async()=>{try{if(!i.oasis.amount)return Object(I["a"])(n("index.請輸入兌換的數量"));let e=i.oasis.amount,t=await i.oasisContract.methods.balanceOf(i.address).call({from:i.address}),a=await i.oasisContract.methods.decimals().call({from:i.address});if(e=new G.a(e).multipliedBy(10**a).toFixed(),1===new G.a(e).comparedTo(t))return Object(I["a"])(n("index.餘額不足"));i.oasis.loadingSwap=!0;await i.SWAPTOPContract.methods.swap(e).estimateGas({from:i.address});await i.SWAPTOPContract.methods.swap(e).send({from:i.address}),Object(I["a"])(n("index.Success")),i.oasis.amount="",i.oasis.loadingSwap=!1}catch(t){i.oasis.loadingSwap=!1,e.$errorformat(t)}},getBalance:async()=>{try{await i.oasisContract.methods.balanceOf(i.address).call({from:i.address})}catch(t){e.$errorformat(t)}}});i.address&&i.initContract(),Object(a["watch"])(()=>i.address,e=>{e&&i.initContract()});const s=Object(a["toRefs"])(i);return{...s}}},Q=(n("7f18"),n("6b0d")),q=n.n(Q);const Y=q()(K,[["render",R],["__scopeId","data-v-fea77a64"]]);t["default"]=Y},"7f18":function(e,t,n){"use strict";n("bfc3")},"97d3":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADYAAAA3CAMAAABwx0lKAAAArlBMVEUAAAChiP+igv+hiP+nhP+ih/+hiP+iiP+hiP+hiP+ei/+hiP+hiP+hiP+hiP+hiP+hiP+iiP+gif+hiP+hiP+hiP+iiP+hiP+iiP+gif+hiP+hiP+hiP+hiP+iiP+hiP+hiP+giP+giP+hif+hiP+hiP+hiP+hiP+hiP+iiv+hiP/////u6v/Ftv/Tx//Mv//RxP/Owf/Ds//7+f/6+P/Iuv/Ar//Zz//BsP/u6f++y1KQAAAAKnRSTlMA+wb1CgLOvqstEebXf2eeliYg4LqlhnFWGPHv7bGNeF9aT0pDNOrGwT+ol0OmAAABzklEQVRIx53W6VKzMBiG4SfsO3Rf7F791Bdbq63Ld/4nJgMzpuALDdx/OtNyTUiZkKAuzev3PQ0tmk0T26c8306mnorxokeq9BTdkrOVTkzz1awBGWNBNelh7TzvB9RQ8MwiUw7FJ9Ym84c7dDPHqCrviRSyK06zSamlVprXiBQbXbMJKRdJ9SDUmXB/J2YR0+v5lXWW2XiLL+n/xts0FjXshWf/jJytqR2jST4zvy0bmAD21JbRM4BRexYD5l175gMP1J6Ri0kXFiHpwhLYXdgQQRcWwO/CfMy7sDlKj+3rcmDZ4fJVYguU3o2XND0w7CNNLyU2gEVZ8nfpJDtk336UmIVleUlLlzGpKgt9iTExTjJW0Rhb+uver9g7o2iHGVV6y13BCvVGlYQHBJz7LhivyAIQUrVTdu1nzr5ZRWsAPeJdxj6zzxPzhu0D4NbAMbv+nJ55RcNiEyXOFR2J6R55j5yrV7bcOXh3bN47EuLc+URcK3mwCEi5wMBvrq6q9B6u2gk1JXYoFamxLSpthMJYG/xpf3N+d3swuVazsvpg00KdqMMRDz1H8EiM5FAsjHVmpLiHWxkbZ1E6GDhbA0qZ7jSMneHQicOpa4LpBwISc5yirVe5AAAAAElFTkSuQmCC"},bfc3:function(e,t,n){},c266:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"oasis","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"top","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"time","type":"uint256"}],"name":"Swap","type":"event"},{"inputs":[],"name":"DEAD","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"OasisToken","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"TopToken","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"USDT","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getTopPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"initialize","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_oasis","type":"address"},{"internalType":"address","name":"_top","type":"address"},{"internalType":"address","name":"_usdt","type":"address"}],"name":"setTokenAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"swap","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"}]')}}]);
//# sourceMappingURL=chunk-7246ae68.1c99a2c9.js.map