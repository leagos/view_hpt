{"version":3,"sources":["webpack:///./src/views/top/index.vue?d027","webpack:///./src/views/top/index.vue","webpack:///./src/views/top/index.vue?8b28"],"names":["class","style","_createElementVNode","_createElementBlock","_createVNode","_component_Header","title","leftTitle","_toDisplayString","_ctx","price","marketValue","totalSupply","blackHole","_hoisted_16","lp","nftReward","_hoisted_23","marketing","_hoisted_27","chainTour","_hoisted_30","components","Header","setup","proxy","getCurrentInstance","store","useStore","t","useI18n","data","reactive","address","computed","state","accounts","web3","provider","top","topContract","SWAPTOPContract","usdtContract","balance","initContract","eth","Contract","topAbi","config","topAddress","swaptopAbi","SWAPTOP","tokenAbi","usdtAddres","initData","async","getPriceHandle","getMarketValue","balanceOfHandle","topPrice","methods","getTopPrice","call","BigNumber","dividedBy","toFixed","error","$errorformat","decimalsTop","decimals","from","multipliedBy","Toast0","Toast","loading","duration","decimalsUsdt","balanceOf","blackHoleAddress","lpAddress","nftRewardAddress","marketingAddress","chainTourAddress","clear","watch","val","refData","toRefs","__exports__","render"],"mappings":"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","file":"static/js/chunk-1ce09f31.73f0ce5c.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=6d0b04a3&lang=less&scoped=true\"","<template>\r\n  <div class=\"container top\">\r\n    <Header title=\"\">\r\n      <template #leftTitle>\r\n        TOP\r\n      </template>\r\n    </Header>\r\n    <div class=\"cell-1 region-bg\" style=\"margin-bottom:20px;\">\r\n      <div class=\"li\">\r\n        <div class=\"key\">{{t('index.TOP價格')}}</div>\r\n        <div class=\"value\">${{top.price || '0.000'}}</div>\r\n      </div>\r\n      <div class=\"li\">\r\n        <div class=\"key\">{{t('index.市值')}}</div>\r\n        <div class=\"value\">${{top.marketValue ||'0.0000'}}</div>\r\n      </div>\r\n      <div class=\"li\">\r\n        <div class=\"key\">{{t('index.流通量')}}</div>\r\n        <div class=\"value\">{{top.totalSupply ||'0.0000'}}</div>\r\n      </div>\r\n    </div>\r\n    <div class=\"cell-2 region-bg\" style=\"margin-bottom:10px;\">\r\n      <div class=\"key\">{{t('index.黑洞數量')}}</div>\r\n      <div class=\"value\">{{balance.blackHole}} <span>TOP</span></div>\r\n    </div>\r\n    <div class=\"cell-2 region-bg\" style=\"margin-bottom:10px;\">\r\n      <div class=\"key\">{{t('index.流動池價值')}}</div>\r\n      <div class=\"value\">${{balance.lp}}</div>\r\n    </div>\r\n    <div class=\"cell-2 region-bg\" style=\"margin-bottom:10px;\">\r\n      <div class=\"key\">{{t('index.NFT分紅')}}</div>\r\n      <div class=\"value\">{{balance.nftReward}} <span>TOP</span></div>\r\n    </div>\r\n    <div class=\"cell-3 region-bg\" style=\"margin-bottom:10px;\">\r\n      <div class=\"key\">{{t('index.營銷基金')}}</div>\r\n      <div class=\"value\">{{balance.marketing}} <span>TOP</span></div>\r\n      <div class=\"key\" style=\"padding-top:12px;\">{{t('index.鏈遊基金')}}</div>\r\n      <div class=\"value\">{{balance.chainTour}} <span>TOP</span></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Header from '@/components/Header'\r\nimport { reactive, toRefs, computed, watch, getCurrentInstance } from \"vue\";\r\nimport { useI18n } from \"vue-i18n\";\r\nimport { useStore } from \"vuex\";\r\nimport { config } from \"@/utils/config\";\r\nimport topAbi from \"@/utils/topAbi\";\r\nimport swaptopAbi from \"@/utils/swaptopAbi\";\r\nimport tokenAbi from \"@/utils/abi\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport {\r\n  Toast\r\n} from \"vant\";\r\nexport default {\r\n  components: {\r\n    Header\r\n  },\r\n  setup () {\r\n    const { proxy } = getCurrentInstance();\r\n    const store = useStore()\r\n    const { t } = useI18n()\r\n    const data = reactive({\r\n      t: t,\r\n      address: computed(() => store.state.accounts[0]),\r\n      web3: computed(() => store.state.provider),\r\n      top: {\r\n        marketValue: '0.0000',\r\n        totalSupply: '0.0000',\r\n        price: '0.0000'\r\n      },\r\n      topContract: null,\r\n      SWAPTOPContract: null,\r\n      usdtContract: null,\r\n      balance: {\r\n        blackHole: '0.0000',\r\n        lp: '0.0000',\r\n        nftReward: '0.0000',\r\n        marketing: '0.0000',\r\n        chainTour: '0.0000',\r\n      },\r\n      initContract: () => {\r\n        data.topContract = new data.web3.eth.Contract(\r\n          topAbi,\r\n          config.topAddress\r\n        );\r\n        data.SWAPTOPContract = new data.web3.eth.Contract(\r\n          swaptopAbi,\r\n          config.SWAPTOP\r\n        );\r\n        data.usdtContract = new data.web3.eth.Contract(\r\n          tokenAbi,\r\n          config.usdtAddres\r\n        );\r\n        data.initData()\r\n      },\r\n      initData: async () => {\r\n        await data.getPriceHandle()\r\n        await data.getMarketValue()\r\n        data.balanceOfHandle()\r\n      },\r\n      getPriceHandle: async () => {\r\n        try {\r\n          let topPrice = await data.SWAPTOPContract.methods.getTopPrice().call({\r\n            address: data.address\r\n          })\r\n          // 除usdt的 18位\r\n          data.top.price = new BigNumber(topPrice)\r\n            .dividedBy(10 ** 18)\r\n            .toFixed(4);\r\n          // console.log(topPrice, 'topPrice')\r\n        } catch (error) {\r\n          proxy.$errorformat(error)\r\n        }\r\n      },\r\n      getMarketValue: async () => {\r\n        // 市值\r\n        try {\r\n          let decimalsTop = await data.topContract.methods\r\n            .decimals()\r\n            .call({ from: data.address })\r\n          // console.log('decimalsTop:', decimalsTop)\r\n          let totalSupply = await data.topContract.methods.totalSupply().call({\r\n            address: data.address\r\n          })\r\n          // console.log('totalSupply:', totalSupply)\r\n          totalSupply = new BigNumber(totalSupply)\r\n            .dividedBy(10 ** decimalsTop)\r\n            .toFixed(4);\r\n          let marketValue = new BigNumber(totalSupply)\r\n            .multipliedBy(data.top.price)\r\n            .toFixed(4);\r\n          data.top.totalSupply = totalSupply\r\n          data.top.marketValue = marketValue\r\n          console.log('totalSupply:', totalSupply, 'marketValue:', marketValue)\r\n        } catch (error) {\r\n          proxy.$errorformat(error)\r\n        }\r\n      },\r\n      balanceOfHandle: async () => {\r\n        const Toast0 = Toast.loading({\r\n          duration: 0,\r\n        });\r\n        try {\r\n          let decimalsTop = await data.topContract.methods\r\n            .decimals()\r\n            .call({ from: data.address })\r\n          let decimalsUsdt = await data.usdtContract.methods\r\n            .decimals()\r\n            .call({ from: data.address })\r\n          // 黑洞余额\r\n          let blackHole = await data.topContract.methods.balanceOf(config.blackHoleAddress).call({\r\n            address: data.address\r\n          })\r\n          blackHole = new BigNumber(blackHole)\r\n            .dividedBy(10 ** decimalsTop)\r\n            .toFixed(4);\r\n          // lp余额\r\n          let lp = await data.usdtContract.methods.balanceOf(config.lpAddress).call({\r\n            address: data.address\r\n          })\r\n          lp = new BigNumber(lp)\r\n            .dividedBy(10 ** decimalsUsdt).multipliedBy(2)\r\n            .toFixed(4);\r\n          // nft分紅\r\n          let nftReward = await data.topContract.methods.balanceOf(config.nftRewardAddress).call({\r\n            address: data.address\r\n          })\r\n          nftReward = new BigNumber(nftReward)\r\n            .dividedBy(10 ** decimalsTop)\r\n            .toFixed(4);\r\n          // 营销\r\n          let marketing = await data.topContract.methods.balanceOf(config.marketingAddress).call({\r\n            address: data.address\r\n          })\r\n          marketing = new BigNumber(marketing)\r\n            .dividedBy(10 ** decimalsTop)\r\n            .toFixed(4);\r\n          // 链游\r\n          let chainTour = await data.topContract.methods.balanceOf(config.chainTourAddress).call({\r\n            address: data.address\r\n          })\r\n          chainTour = new BigNumber(chainTour)\r\n            .dividedBy(10 ** decimalsTop)\r\n            .toFixed(4);\r\n\r\n          console.log('blackHole:', blackHole, 'lp:', lp, 'nftReward:', nftReward, 'marketing:', marketing, 'chainTour:', chainTour)\r\n          data.balance = {\r\n            blackHole,\r\n            lp,\r\n            nftReward,\r\n            marketing,\r\n            chainTour\r\n          }\r\n          Toast0.clear()\r\n        } catch (error) {\r\n          Toast0.clear()\r\n          proxy.$errorformat(error)\r\n        }\r\n      }\r\n    })\r\n    if (data.address) {\r\n      data.initContract()\r\n    }\r\n    watch(() => data.address, (val) => {\r\n      if (val) {\r\n        data.initContract()\r\n      }\r\n    })\r\n    const refData = toRefs(data);\r\n    return {\r\n      ...refData\r\n    };\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.container {\r\n  padding: 58px 15px 12px;\r\n}\r\n.cell-1 {\r\n  padding: 45px 24px 31px;\r\n  margin-bottom: 21px;\r\n  position: relative;\r\n  .title {\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 3px;\r\n    transform: translateX(-50%);\r\n    font-size: 15px;\r\n    font-weight: bold;\r\n    color: #5bffff;\r\n    line-height: 20px;\r\n    text-shadow: 0px 1px 0px rgba(73, 0, 146, 0.35);\r\n  }\r\n  .li {\r\n    display: flex;\r\n    align-items: center;\r\n    flex-wrap: wrap;\r\n    &:not(:last-child) {\r\n      padding-bottom: 25px;\r\n    }\r\n    font-size: 15px;\r\n    font-weight: 500;\r\n    .key {\r\n      color: #00edf8;\r\n    }\r\n    .value {\r\n      text-align: right;\r\n      flex-grow: 1;\r\n      font-size: 15px;\r\n      font-weight: 600;\r\n      color: #ffffff;\r\n    }\r\n  }\r\n}\r\n.cell-2 {\r\n  padding: 0 20px;\r\n  .key {\r\n    padding-top: 24px;\r\n    font-size: 15px;\r\n    font-weight: 500;\r\n    color: #00edf8;\r\n  }\r\n  .value {\r\n    word-break: break-all;\r\n    padding-top: 20px;\r\n    font-size: 22px;\r\n    font-weight: 600;\r\n    color: #ffffff;\r\n    padding-bottom: 25px;\r\n    span {\r\n      font-size: 14px;\r\n    }\r\n  }\r\n}\r\n.cell-3 {\r\n  text-align: center;\r\n  padding: 24px 20px 18px;\r\n  .key {\r\n    font-size: 15px;\r\n    font-weight: 500;\r\n    color: #00edf8;\r\n    padding-bottom: 14px;\r\n  }\r\n  .value {\r\n    word-break: break-all;\r\n    font-size: 22px;\r\n    font-weight: 600;\r\n    color: #ffffff;\r\n    span {\r\n      font-size: 14px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./index.vue?vue&type=template&id=6d0b04a3&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=6d0b04a3&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\contract\\\\frontend\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6d0b04a3\"]])\n\nexport default __exports__"],"sourceRoot":""}